<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Projet Arrosage â€” Nathan & LÃ©o</title>

  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='14' fill='%23072a55'/%3E%3Cpath d='M32 10s14 16 14 28a14 14 0 1 1-28 0c0-12 14-28 14-28z' fill='%236fb6ff'/%3E%3Ccircle cx='24' cy='42' r='3' fill='white' fill-opacity='.8'/%3E%3C/svg%3E" />

  <style>
    :root{
      --bg1:#041325; --bg2:#072a55; --bg3:#0b4f86;
      --txt: rgba(255,255,255,.95);
      --muted: rgba(255,255,255,.72);
      --accent:#6fb6ff; --accent2:#66e6b3;
      --shadow: 0 22px 60px rgba(0,0,0,.48);
      --shadow2: 0 14px 34px rgba(0,0,0,.36);
      --r: 20px;
    }

    *{box-sizing:border-box;}
    html,body{height:100%; margin:0; overflow:hidden;}

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--txt);
      background:
        radial-gradient(1100px 650px at 15% 10%, rgba(111,182,255,.33), transparent 55%),
        radial-gradient(900px 600px at 85% 0%, rgba(102,230,179,.18), transparent 55%),
        radial-gradient(900px 700px at 50% 110%, rgba(11,79,134,.62), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
    }

    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; opacity:.28;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='520' height='520' viewBox='0 0 520 520'%3E%3Cg fill='white' fill-opacity='.55'%3E%3Cpath d='M70 92c0-14 15-28 15-28s15 14 15 28c0 10-7 19-15 19s-15-9-15-19z'/%3E%3Cpath d='M168 160c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3Cpath d='M340 110c0-15 16-30 16-30s16 15 16 30c0 11-7 20-16 20s-16-9-16-20z'/%3E%3Cpath d='M448 210c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3Cpath d='M110 360c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3Cpath d='M250 430c0-14 15-28 15-28s15 14 15 28c0 10-7 19-15 19s-15-9-15-19z'/%3E%3Cpath d='M410 390c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3C/g%3E%3C/svg%3E");
      background-size: 240px 240px;
    }

    .page{height:100vh; display:flex; flex-direction:column;}

    header{
      backdrop-filter: blur(10px); background: rgba(0,0,0,.26);
      border-bottom: 1px solid rgba(255,255,255,.14); padding: 12px 18px; text-align:center;
    }
    .titleTop{ margin:0; font-weight:1000; font-size: clamp(28px, 5vw, 52px); text-shadow: 0 10px 26px rgba(0,0,0,.40); }
    .subTop{margin:6px 0 0; color:var(--muted); font-size:14px;}

    main{ flex:1; padding: 12px 18px 18px; display:flex; justify-content:center; align-items:stretch; overflow:hidden; }

    .card{
      width:min(1200px, 100%); border:1px solid rgba(255,255,255,.22);
      border-radius: var(--r); background: rgba(255,255,255,.14);
      box-shadow: var(--shadow); overflow:hidden; display:flex; flex-direction:column; backdrop-filter: blur(10px);
    }
    .card .hd{ padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.16); display:flex; justify-content:space-between; align-items:center; background: rgba(0,0,0,.12); }
    .card h2{margin:0; font-size:16px;}
    .card .bd{flex:1; padding: 12px 14px; position:relative; overflow:hidden;}

    .map{ position:relative; height:100%; border-radius: 18px; background: rgba(255,255,255,.05); border: 1px solid rgba(255,255,255,.1); overflow:hidden; }

    .lines{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; z-index:1; }

    .node{
      position:absolute; width:255px; padding:12px; border-radius:20px;
      border:1px solid rgba(255,255,255,.26); background: rgba(0,0,0,.40);
      box-shadow: var(--shadow2); backdrop-filter: blur(8px); z-index:2;
    }
    .node .t{font-weight:1000; margin-bottom:6px;}
    .node .d{font-size:13px; color:var(--muted); margin-bottom:10px;}
    .node .links{display:flex; flex-wrap:wrap; gap:8px;}

    .pill{
      display:inline-flex; align-items:center; padding:8px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.24); background: rgba(255,255,255,.08);
      text-decoration:none; font-size:12px; color: var(--txt);
    }
    .pill.blue{border-color: var(--accent);}
    .pill.green{border-color: var(--accent2);}

    .center{ left:50%; top:50%; transform: translate(-50%, -50%); width:350px; background: linear-gradient(180deg, rgba(111,182,255,.2), rgba(0,0,0,.4)); }

    .n-recherche{ left:5%;  top:10%; }
    .n-onshape  { right:5%; top:10%; }
    .n-besoin   { left:5%;  top:55%; }
    .n-planning { right:5%; top:55%; }
    .n-medias   { left:50%; top:85%; transform: translateX(-50%); width:380px; }

    .fab{ position: fixed; right: 16px; bottom: 16px; display:flex; gap:10px; z-index: 10; }
    .fab a{ padding: 10px 15px; border-radius: 999px; border:1px solid rgba(255,255,255,.2); background: rgba(0,0,0,.5); color: #fff; text-decoration:none; font-size:13px; font-weight:700; backdrop-filter: blur(5px); }
  </style>
</head>

<body>
  <div class="page">
    <header>
      <h1 class="titleTop">Projet Arrosage â€” Nathan & LÃ©o</h1>
      <p class="subTop">Carte mentale du projet</p>
    </header>

    <main>
      <section class="card">
        <div class="hd"><h2>ðŸ§  Carte mentale</h2><span style="opacity:0.6; font-size:12px;">Interactif</span></div>
        <div class="bd">
          <div class="map" id="map">
            <svg class="lines" id="lines">
              <defs>
                <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#6fb6ff"/><stop offset="1" stop-color="#66e6b3"/>
                </linearGradient>
                <filter id="glow"><feGaussianBlur stdDeviation="2" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                <mask id="cutNodes" maskUnits="userSpaceOnUse"><rect id="cut-bg" fill="white"/></mask>
              </defs>
            </svg>

            <div class="node center" id="node-center">
              <div class="t">Projet Arrosage</div>
              <div class="d">De lâ€™existant â†’ besoin â†’ conception â†’ planning â†’ rÃ©alisation.</div>
            </div>

            <div class="node n-recherche" id="node-recherche">
              <div class="t">ðŸ”Ž Recherche</div><div class="d">Ã‰tat des lieux.</div>
              <div class="links"><a class="pill blue" href="#">Ouvrir</a></div>
            </div>

            <div class="node n-onshape" id="node-onshape">
              <div class="t">ðŸ§© Onshape</div><div class="d">ModÃ©lisation 3D.</div>
              <div class="links"><a class="pill green" href="#">PiÃ¨ce 1</a><a class="pill green" href="#">PiÃ¨ce 2</a></div>
            </div>

            <div class="node n-besoin" id="node-besoin">
              <div class="t">ðŸ§¾ Besoin</div><div class="d">Cahier des charges.</div>
              <div class="links"><a class="pill blue" href="#">Voir</a></div>
            </div>

            <div class="node n-planning" id="node-planning">
              <div class="t">ðŸ“… Planning</div><div class="d">Gantt & Suivi.</div>
              <div class="links"><a class="pill blue" href="#">Dossier</a></div>
            </div>

            <div class="node n-medias" id="node-medias">
              <div class="t">ðŸ“· MÃ©dias</div><div class="d">Croquis, programme, schÃ©ma, vidÃ©o.</div>
              <div class="links">
                <a class="pill blue" href="#">Croquis</a>
                <a class="pill blue" href="#">Programme</a>
                <a class="pill blue" href="#">SchÃ©ma</a>
                <a class="pill green" href="#">VidÃ©o</a>
              </div>
            </div>

          </div>
        </div>
      </section>
    </main>

    <div class="fab">
      <a href="#" style="border-color:#66e6b3">â†— GitHub</a>
      <a href="#" style="border-color:#6fb6ff">â¬‡ ZIP</a>
    </div>
  </div>

  <script>
    function must(id){ return document.getElementById(id); }

    function rectRel(el, rootRect){
      const r = el.getBoundingClientRect();
      return {
        left: r.left - rootRect.left, top: r.top - rootRect.top,
        right: r.right - rootRect.left, bottom: r.bottom - rootRect.top,
        width: r.width, height: r.height,
        cx: (r.left - rootRect.left) + r.width/2, cy: (r.top - rootRect.top) + r.height/2
      };
    }

    function bezierPath(a, b, isVertical){
      if(isVertical){
        const midY = a.y + (b.y - a.y) * 0.5;
        return `M ${a.x} ${a.y} C ${a.x} ${midY}, ${b.x} ${midY}, ${b.x} ${b.y}`;
      }
      const midX = a.x + (b.x - a.x) * 0.5;
      return `M ${a.x} ${a.y} C ${midX} ${a.y}, ${midX} ${b.y}, ${b.x} ${b.y}`;
    }

    function layoutLines(){
      const map = must('map');
      const svg = must('lines');
      const root = map.getBoundingClientRect();
      
      svg.setAttribute('width', root.width);
      svg.setAttribute('height', root.height);
      must('cut-bg').setAttribute('width', root.width);
      must('cut-bg').setAttribute('height', root.height);

      const cRect = rectRel(must('node-center'), root);
      const targets = ['recherche', 'besoin', 'onshape', 'planning', 'medias'];

      targets.forEach(id => {
        const tNode = must('node-' + id);
        const tRect = rectRel(tNode, root);
        let start, end;

        if(id === 'medias'){
          start = { x: cRect.cx, y: cRect.bottom };
          end = { x: tRect.cx, y: tRect.top };
        } else {
          start = { x: (tRect.cx < cRect.cx ? cRect.left : cRect.right), y: cRect.cy };
          end = { x: (tRect.cx < cRect.cx ? tRect.right : tRect.left), y: tRect.cy };
        }

        let p = must('p-' + id);
        if(!p){
          p = document.createElementNS("http://www.w3.org/2000/svg", "path");
          p.id = 'p-' + id;
          p.setAttribute('stroke', 'url(#g)');
          p.setAttribute('stroke-width', '4');
          p.setAttribute('fill', 'none');
          p.setAttribute('filter', 'url(#glow)');
          p.setAttribute('mask', 'url(#cutNodes)');
          svg.appendChild(p);
        }
        p.setAttribute('d', bezierPath(start, end, id === 'medias'));
      });
    }

    window.addEventListener('load', () => { layoutLines(); setTimeout(layoutLines, 100); });
    window.addEventListener('resize', layoutLines);
  </script>
</body>
</html>
