<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Projet Arrosage â€” Nathan & LÃ©o</title>

  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='14' fill='%23072a55'/%3E%3Cpath d='M32 10s14 16 14 28a14 14 0 1 1-28 0c0-12 14-28 14-28z' fill='%236fb6ff'/%3E%3Ccircle cx='24' cy='42' r='3' fill='white' fill-opacity='.8'/%3E%3C/svg%3E" />

  <style>
    :root{
      --bg1:#041325; --bg2:#072a55; --bg3:#0b4f86;
      --txt: rgba(255,255,255,.95);
      --muted: rgba(255,255,255,.72);
      --accent:#6fb6ff; --accent2:#66e6b3;
      --shadow: 0 22px 60px rgba(0,0,0,.48);
      --shadow2: 0 14px 34px rgba(0,0,0,.36);
      --r: 20px;
    }

    *{box-sizing:border-box;}
    html,body{height:100%; margin:0; overflow:hidden;}

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--txt);
      background:
        radial-gradient(1100px 650px at 15% 10%, rgba(111,182,255,.33), transparent 55%),
        radial-gradient(900px 600px at 85% 0%, rgba(102,230,179,.18), transparent 55%),
        radial-gradient(900px 700px at 50% 110%, rgba(11,79,134,.62), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
    }

    /* Gouttes en arriÃ¨re-plan */
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; opacity:.20;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='520' height='520' viewBox='0 0 520 520'%3E%3Cg fill='white' fill-opacity='.55'%3E%3Cpath d='M70 92c0-14 15-28 15-28s15 14 15 28c0 10-7 19-15 19s-15-9-15-19z'/%3E%3Cpath d='M168 160c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3Cpath d='M340 110c0-15 16-30 16-30s16 15 16 30c0 11-7 20-16 20s-16-9-16-20z'/%3E%3Cpath d='M448 210c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3Cpath d='M110 360c0-12 13-24 13-24s13 12 13 24c0 9-6 16-13 16s-13-7-13-16z'/%3E%3C/g%3E%3C/svg%3E");
      background-size: 240px 240px;
    }

    .page{height:100vh; display:flex; flex-direction:column;}

    header{
      backdrop-filter: blur(10px); background: rgba(0,0,0,.26);
      border-bottom: 1px solid rgba(255,255,255,.14); padding: 12px 18px; text-align:center;
    }
    .titleTop{ margin:0; font-weight:1000; font-size: clamp(28px, 5vw, 48px); text-shadow: 0 10px 26px rgba(0,0,0,.40); }
    .subTop{margin:4px 0 0; color:var(--muted); font-size:14px;}

    main{ flex:1; padding: 15px; display:flex; justify-content:center; align-items:stretch; overflow:hidden; }

    .card{
      width:min(1200px, 100%); border:1px solid rgba(255,255,255,.22);
      border-radius: var(--r); background: rgba(255,255,255,.12);
      box-shadow: var(--shadow); overflow:hidden; display:flex; flex-direction:column; backdrop-filter: blur(12px);
    }
    .card .hd{ padding:12px 16px; border-bottom:1px solid rgba(255,255,255,.16); display:flex; justify-content:space-between; align-items:center; background: rgba(0,0,0,.15); }
    .card h2{margin:0; font-size:16px;}
    .card .bd{flex:1; position:relative; overflow:hidden; padding: 10px;}

    .map{ position:relative; height:100%; border-radius: 15px; background: rgba(255,255,255,.03); border: 1px solid rgba(255,255,255,.08); overflow:hidden; }

    .lines{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; z-index:1; }

    .node{
      position:absolute; width:260px; padding:14px; border-radius:20px;
      border:1px solid rgba(255,255,255,.25); background: rgba(10, 25, 45, 0.65);
      box-shadow: var(--shadow2); backdrop-filter: blur(10px); z-index:2;
    }
    .node .t{font-weight:1000; margin-bottom:6px; font-size: 15px;}
    .node .d{font-size:12.5px; color:var(--muted); margin-bottom:12px; line-height: 1.3;}
    .node .links{display:flex; flex-wrap:wrap; gap:8px;}

    .pill{
      display:inline-flex; align-items:center; padding:7px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.06);
      text-decoration:none; font-size:12px; color: var(--txt); transition: 0.2s;
    }
    .pill:hover{ background: rgba(255,255,255,0.15); border-color: rgba(255,255,255,0.4); }
    .pill.blue{border-color: var(--accent);}
    .pill.green{border-color: var(--accent2);}

    .center{ left:50%; top:50%; transform: translate(-50%, -50%); width:360px; background: linear-gradient(180deg, rgba(111,182,255,.15), rgba(0,0,0,.5)); border-color: rgba(111,182,255,0.4); }
    .center .t{ font-size: 19px; }

    /* Positions des cartes */
    .n-recherche{ left:4%;  top:8%; }
    .n-onshape  { right:4%; top:8%; }
    .n-besoin   { left:4%;  top:56%; }
    .n-planning { right:4%; top:56%; }
    .n-medias   { left:50%; top:86%; transform: translateX(-50%); width:400px; }

    .fab{ position: fixed; right: 20px; bottom: 20px; display:flex; gap:12px; z-index: 100; }
    .fab a{ padding: 10px 18px; border-radius: 999px; border:1px solid rgba(255,255,255,.2); background: rgba(0,0,0,0.6); color: #fff; text-decoration:none; font-size:13px; font-weight:700; backdrop-filter: blur(8px); }
  </style>
</head>

<body>
  <div class="page">
    <header>
      <h1 class="titleTop">Projet Arrosage â€” Nathan & LÃ©o</h1>
      <p class="subTop">Carte mentale du projet (Onshape â€¢ besoin â€¢ mÃ©dias â€¢ planning)</p>
    </header>

    <main>
      <section class="card">
        <div class="hd">
          <h2>ðŸ§  Carte mentale</h2>
          <span style="opacity:0.6; font-size:12px;">Cliquez sur les Ã©lÃ©ments</span>
        </div>
        <div class="bd">
          <div class="map" id="map">
            <svg class="lines" id="lines">
              <defs>
                <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0" stop-color="#6fb6ff"/><stop offset="1" stop-color="#66e6b3"/>
                </linearGradient>
                <filter id="glow"><feGaussianBlur stdDeviation="2.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                <mask id="cutNodes" maskUnits="userSpaceOnUse"><rect id="cut-bg" fill="white"/></mask>
              </defs>
            </svg>

            <div class="node center" id="node-center">
              <div class="t">Projet Arrosage</div>
              <div class="d">De lâ€™existant â†’ besoin â†’ conception â†’ planning â†’ rÃ©alisation.</div>
            </div>

            <div class="node n-recherche" id="node-recherche">
              <div class="t">ðŸ”Ž Recherche de l'existant</div>
              <div class="d">Carte mentale / Ã©tat des lieux.</div>
              <div class="links">
                <a class="pill blue" target="_blank" href="https://nathanjammes-lab.github.io/Projet_Arosage/carte%20mentale/MVHtmlExport/index.htm">Ouvrir</a>
              </div>
            </div>

            <div class="node n-onshape" id="node-onshape">
              <div class="t">ðŸ§© Conception Onshape</div>
              <div class="d">PiÃ¨ces modÃ©lisÃ©es (liens directs).</div>
              <div class="links">
                <a class="pill green" target="_blank" href="https://cad.onshape.com/documents/1ebdcbd39435717654714584/w/061c80a41a81f831c6c7d309/e/0c81dac8944d71dc4b8938b5">PiÃ¨ce 1</a>
                <a class="pill green" target="_blank" href="https://cad.onshape.com/documents/1d237ad3dc8cacce2a01fc8e/w/529bf12c2ad7c537813b41eb/e/0f21f78a75b64e775cbfc654">PiÃ¨ce 2</a>
              </div>
            </div>

            <div class="node n-besoin" id="node-besoin">
              <div class="t">ðŸ§¾ Besoin / analyse</div>
              <div class="d">Cahier des charges, contraintes.</div>
              <div class="links">
                <a class="pill blue" target="_blank" href="https://raw.githubusercontent.com/nathanjammes-lab/Projet_Arosage/refs/heads/main/analyse_besoin/analyse_besoin.jpg">Voir (image)</a>
              </div>
            </div>

            <div class="node n-planning" id="node-planning">
              <div class="t">ðŸ“… Planning</div>
              <div class="d">GanttProject (.gan) + suivi.</div>
              <div class="links">
                <a class="pill blue" href="projet_arrossage/planning_ganttproject/projet_arrossage.gan">TÃ©lÃ©charger</a>
                <a class="pill blue" target="_blank" href="https://github.com/nathanjammes-lab/Projet_Arrosage_Nathan_Leo/tree/main/projet_arrossage/planning_ganttproject">Dossier</a>
              </div>
            </div>

            <div class="node n-medias" id="node-medias">
              <div class="t">ðŸ“· MÃ©dias</div>
              <div class="d">Croquis, programme, schÃ©ma, vidÃ©o.</div>
              <div class="links">
                <a class="pill blue" href="autres_fichiers/Croquis.jpg">Croquis</a>
                <a class="pill blue" href="autres_fichiers/Programe.png">Programme</a>
                <a class="pill blue" href="autres_fichiers/Systeme_d_arrosage_FINI.drawio.png">SchÃ©ma</a>
                <a class="pill green" href="autres_fichiers/video.mp4">VidÃ©o</a>
              </div>
            </div>

          </div>
        </div>
      </section>
    </main>

    <div class="fab">
      <a href="https://github.com/nathanjammes-lab/Projet_Arrosage_Nathan_Leo" target="_blank" style="border-color:#66e6b3">â†— GitHub</a>
      <a href="https://github.com/nathanjammes-lab/Projet_Arrosage_Nathan_Leo/archive/refs/heads/main.zip" style="border-color:#6fb6ff">â¬‡ ZIP</a>
    </div>
  </div>

  <script>
    function must(id){ return document.getElementById(id); }

    function rectRel(el, rootRect){
      const r = el.getBoundingClientRect();
      return {
        left: r.left - rootRect.left, top: r.top - rootRect.top,
        right: r.right - rootRect.left, bottom: r.bottom - rootRect.top,
        width: r.width, height: r.height,
        cx: (r.left - rootRect.left) + r.width/2, cy: (r.top - rootRect.top) + r.height/2
      };
    }

    function bezierPath(a, b, isVertical){
      if(isVertical){
        const midY = a.y + (b.y - a.y) * 0.4;
        return `M ${a.x} ${a.y} C ${a.x} ${midY}, ${b.x} ${a.y + (b.y-a.y)*0.6}, ${b.x} ${b.y}`;
      }
      const midX = a.x + (b.x - a.x) * 0.5;
      return `M ${a.x} ${a.y} C ${midX} ${a.y}, ${midX} ${b.y}, ${b.x} ${b.y}`;
    }

    function layoutLines(){
      const map = must('map');
      const svg = must('lines');
      const root = map.getBoundingClientRect();
      
      svg.setAttribute('width', root.width);
      svg.setAttribute('height', root.height);
      must('cut-bg').setAttribute('width', root.width);
      must('cut-bg').setAttribute('height', root.height);

      const cRect = rectRel(must('node-center'), root);
      const targets = ['recherche', 'besoin', 'onshape', 'planning', 'medias'];

      targets.forEach(id => {
        const tNode = must('node-' + id);
        const tRect = rectRel(tNode, root);
        let start, end;

        if(id === 'medias'){
          start = { x: cRect.cx, y: cRect.bottom + 5 };
          end = { x: tRect.cx, y: tRect.top - 5 };
        } else {
          start = { x: (tRect.cx < cRect.cx ? cRect.left - 5 : cRect.right + 5), y: cRect.cy };
          end = { x: (tRect.cx < cRect.cx ? tRect.right + 5 : tRect.left - 5), y: tRect.cy };
        }

        let p = must('p-' + id);
        if(!p){
          p = document.createElementNS("http://www.w3.org/2000/svg", "path");
          p.id = 'p-' + id;
          p.setAttribute('stroke', 'url(#g)');
          p.setAttribute('stroke-width', '4.5');
          p.setAttribute('fill', 'none');
          p.setAttribute('filter', 'url(#glow)');
          p.setAttribute('mask', 'url(#cutNodes)');
          svg.appendChild(p);
        }
        p.setAttribute('d', bezierPath(start, end, id === 'medias'));
      });
    }

    window.addEventListener('load', () => { 
      layoutLines(); 
      setTimeout(layoutLines, 200); // Recalcul aprÃ¨s rendu final
    });
    window.addEventListener('resize', layoutLines);
  </script>
</body>
</html>
